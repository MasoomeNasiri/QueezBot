import datetime
import os

# Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„ Ù„Ø§Ú¯
LOG_FILE_PATH = "bot.log"

def write_log(message):
    """
    Ù†ÙˆØ´ØªÙ† ÛŒÚ© Ù¾ÛŒØ§Ù… Ø¯Ø± ÙØ§ÛŒÙ„ Ù„Ø§Ú¯
    """
    try:
        # Ú¯Ø±ÙØªÙ† Ø²Ù…Ø§Ù† ÙØ¹Ù„ÛŒ
        now = datetime.datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        
        # Ø³Ø§Ø®Øª Ù¾ÛŒØ§Ù… Ù„Ø§Ú¯
        log_message = f"[{timestamp}] {message}\n"
        
        # Ø§ÛŒØ¬Ø§Ø¯ ÙÙˆÙ„Ø¯Ø± Ø§Ú¯Ø± Ù†Ø¨Ø§Ø´Ù‡
        os.makedirs(os.path.dirname(LOG_FILE_PATH), exist_ok=True)
        
        # Ù†ÙˆØ´ØªÙ† Ø¯Ø± ÙØ§ÛŒÙ„
        with open(LOG_FILE_PATH, "a", encoding="utf-8") as f:
            f.write(log_message)
    except Exception as e:
        print(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ù†ÙˆØ´ØªÙ† Ù„Ø§Ú¯: {e}")

def log_error(error_message):
    """
    Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù† ÛŒÚ© Ø®Ø·Ø§
    """
    write_log(f"âŒ ERROR: {error_message}")

def log_info(info_message):
    """
    Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù† ÛŒÚ© Ø§Ø·Ù„Ø§Ø¹Ø§Øª
    """
    write_log(f"â„¹ï¸ INFO: {info_message}")

def log_warning(warning_message):
    """
    Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù† ÛŒÚ© Ù‡Ø´Ø¯Ø§Ø±
    """
    write_log(f"âš ï¸ WARNING: {warning_message}")

def log_user_action(user_id, action):
    """
    Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù† Ø¹Ù…Ù„ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø±
    """
    write_log(f"ğŸ‘¤ USER {user_id}: {action}")

def log_exam_action(exam_code, action):
    """
    Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù† Ø¹Ù…Ù„ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ†
    """
    write_log(f"ğŸ“ EXAM {exam_code}: {action}")

def log_database_action(table_name, action):
    """
    Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù† Ø¹Ù…Ù„ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
    """
    write_log(f"ğŸ’¾ DATABASE {table_name}: {action}")